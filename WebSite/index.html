<!DOCTYPE html>
<html>
  <head>
    <!--AFrame version 1.3.0-->
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>

    <!--AFrame Troika-->
    <script src="https://unpkg.com/aframe-troika-text/dist/aframe-troika-text.min.js"></script>

    <!-- AFrame Orbit Control -->
    <script src="https://unpkg.com/aframe-orbit-controls@1.0.0/dist/aframe-orbit-controls.min.js"></script>

    <!--MQTT.js 4.3.7-->
    <script src="https://unpkg.com/mqtt@4.3.7/dist/mqtt.min.js"></script>

    <!--D3.js-->
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <!-- 导入外部JavaScript文件 -->
    <script src="./js/mqtt-config.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script src="./js/custom-components.js"></script>

  </head>
    <body>

    <a-scene 
        renderer="antialias: true;
        colorManagement: true;
        sortObjects: true;
        physicallyCorrectLights: true;
        "
        cursor="rayOrigin: mouse"
        raycaster="objects: .collidable"

        vr-mode-ui="enabled:false" background="color: #FAFAFA">
        <a-asset>
            <img id="sky" src="./resources/UCLquad.webp" />

            <a-asset-item id="plant" src="resources/Plant.glb"> </a-asset-item>

            <a-asset-item id="display" src="resources/display.glb"> </a-asset-item>
          
            <a-asset-item id="table" src="resources/table.glb"> </a-asset-item>

            <a-asset-item id="button" src="resources/button.glb"> </a-asset-item>
        </a-asset>

        <a-entity
            id="_table"
            gltf-model="#table"
            scale="1 1 1"
            position="0 -1.6 0"
            rotation="0 0 0"
        ></a-entity>

        <a-entity
            id="_plant"
            gltf-model="#plant"
            scale="1 1 1"
            position="0 -0.51 0.1"
            rotation="0 0 0"
        ></a-entity>

        <a-entity
            id="_display"
            gltf-model="#display"
            scale="0.135 0.15 0.1"
            position="0.32 -0.3 0.1"
            rotation="0 0 0"
        >

            <a-troika-text
              id="notification"
              value="Light up to
  remind people"
              width="3.5"
              anchor="left"
              position="-0.85 0.45 0.02"
            ></a-troika-text>t

              <a-entity
                class="collidable"
                id="remind-button"
                geometry="primitive: box; width:0.4; height: 0.4; depth: 0.1;"
                material="color: orange; emissive:#b9ff19; emissiveIntensity:0.1"
                position="-0.5 -0.65 0.02"              
              >
              </a-entity>



        </a-entity>

        <a-entity
            id="_display"
            gltf-model="#display"
            scale="0.135 0.15 0.1"
            position="-0.249 -0.3 0.1"
            rotation="0 0 0"
        >

            <a-troika-text
            id="moisture"
            value="Moisture: "
            width="3.5"
            anchor="left"
            position="-0.95 0.6 0.02"
            ></a-troika-text>
            <a-troika-text
            id="temperature"
            value="Temperature: "
            width="3.5"
            anchor="left"
            position="-0.95 0.2 0.02"
            ></a-troika-text>
            <a-troika-text
            id="humidity"
            value="Humidity: "
            width="3.5"
            anchor="left"
            position="-0.95 -0.2 0.02"
            ></a-troika-text>

            <a-entity 
            id="buttonsGroup"
            controller="connect:#connect-button; disconnect:#disconnect-button"
            >
                <a-entity
                  class="collidable"
                  id="connect-button"
                  geometry="primitive: box; width:0.4; height: 0.4; depth: 0.1;"
                  material="color: green; emissive:#b9ff19; emissiveIntensity:0.1"
                  position="-0.5 -0.65 0.02"
                >
                </a-entity>
                <a-entity
                  class="collidable"
                  id="disconnect-button"
                  geometry="primitive: box; width:0.4; height: 0.4; depth: 0.1;"
                  material="color: red; emissive:#ff1100; emissiveIntensity:0.1"
                  position="0.5 -0.65 0.02"
                >
                </a-entity>
            </a-entity>
    
        </a-entity>

        <a-sky radius="1.6" src="#sky"></a-sky>
        <a-entity
          camera
          look-controls
          orbit-controls="target: 0 0 0; minDistance: 0; maxDistance: 0.95; initialPosition: 0 0 0.8; dampingFactor:0.05"
        ></a-entity>

    </a-scene>

  </body>
</html>